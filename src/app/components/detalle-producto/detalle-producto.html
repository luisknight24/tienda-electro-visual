<div class="contenedor-detalle">
    <button mat-icon-button class="btn-cerrar" (click)="cerrar()">
        <mat-icon>close</mat-icon>
    </button>

    <div class="columna-imagen">
        <div class="etiqueta-eficiencia" *ngIf="producto.eficiencia">
            Energía {{ producto.eficiencia }}
        </div>
        <img [src]="producto.imagenUrl" [alt]="producto.nombre" class="imagen-grande">
    </div>

    <div class="columna-info">
        <div class="header-info">
            <div class="fila-superior">
                <span class="sku">SKU: {{ producto.sku || 'N/A' }}</span>
                <span class="etiqueta-oferta-modal" *ngIf="producto.precioOriginal">¡OFERTA ESPECIAL!</span>
            </div>

            <h2 mat-dialog-title>{{ producto.nombre | uppercase }}</h2>

            <div class="contenedor-precios-detalle">
                <span class="precio-antiguo" *ngIf="producto.precioOriginal">
                    Antes: {{ producto.precioOriginal | currency:'USD':'symbol':'1.0-0' }}
                </span>

                <div class="precio-grande" [class.texto-rojo]="producto.precioOriginal">
                    {{ producto.precio | currency:'USD' }}
                </div>
            </div>
        </div>

        <mat-dialog-content class="contenido-scroll">
            <p class="descripcion-larga">{{ producto.descripcion }}</p>

            <div class="seccion-specs" *ngIf="producto.caracteristicas">
                <h3>Características Principales:</h3>
                <ul>
                    <li *ngFor="let item of producto.caracteristicas">
                        <mat-icon class="check-icon">check_circle</mat-icon>
                        {{ item }}
                    </li>
                </ul>
            </div>

            <div class="garantia-badge" *ngIf="producto.garantia">
                <mat-icon>verified_user</mat-icon>
                <span>Garantía: {{ producto.garantia }}</span>
            </div>

            <div class="calculadora-credito">
                <div class="titulo-calc">
                    <mat-icon>calculate</mat-icon>
                    <span>Calcula tu crédito</span>
                </div>
                <p class="label-meses">Selecciona el plazo:</p>
                <mat-chip-listbox aria-label="Selección de plazos">
                    <mat-chip-option *ngFor="let mes of plazos" [selected]="mes === plazoSeleccionado"
                        (click)="calcularCuota(mes)" color="accent">
                        {{ mes }} Meses
                    </mat-chip-option>
                </mat-chip-listbox>
                <div class="resultado-cuota">
                    <div class="texto-cuota">
                        <span class="meses-big">{{ plazoSeleccionado }}</span>
                        <span class="text-small">cuotas de</span>
                    </div>
                    <div class="valor-big">
                        {{ valorCuota | currency:'USD':'symbol':'1.2-2' }}
                    </div>
                </div>
                <div class="total-info">
                    Total a pagar (inc. intereses): {{ totalFinal | currency:'USD' }}
                </div>
            </div>
        </mat-dialog-content>

        <mat-dialog-actions align="end" class="acciones">
            <button mat-stroked-button class="btn-fav" [class.activo]="favoritosService.esFavorito(producto.id)"
                (click)="toggleFavorito()">
                <mat-icon>
                    {{ favoritosService.esFavorito(producto.id) ? 'favorite' : 'favorite_border' }}
                </mat-icon>
                {{ favoritosService.esFavorito(producto.id) ? 'GUARDADO' : 'AGREGAR A FAVORITOS' }}
            </button>

            <button mat-flat-button color="primary">SOLICITAR INFO</button>
        </mat-dialog-actions>
    </div>
</div>